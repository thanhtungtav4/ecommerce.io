!function(t){var e={};function o(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,o){o(1),o(8),t.exports=o(13)},function(t,e,o){function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(n=function(t){return t?o:e})(t)}jQuery((function(t){Promise.resolve().then((function(){return function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var o=n(e);if(o&&o.has(t))return o.get(t);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if("default"!==c&&Object.prototype.hasOwnProperty.call(t,c)){var s=r?Object.getOwnPropertyDescriptor(t,c):null;s&&(s.get||s.set)?Object.defineProperty(i,c,s):i[c]=t[c]}return i.default=t,o&&o.set(t,i),i}(o(2))})).then((function(e){var o=e.PluginHelper;o.ResetAfterTermCreate(),o.ColorPicker(),o.ImageUploader(),o.FieldDependency(),o.Pagination(),o.MetaboxToggle(),o.AttributeTypeSwitch(),o.SaveProductAttributes(),t(document.body).on("woo_variation_swatches_variation_product_options_reset woo_variation_swatches_product_term_paging_done",(function(t,e){o.InitTooltip(),o.SelectWoo(),o.ColorPicker(),o.FieldDependency(),o.SetAttributeTypePaging(e)}))}))}))},function(t,e,o){"use strict";function a(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function n(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function i(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}o.r(e),o.d(e,"PluginHelper",(function(){return c}));var r,c=(r=jQuery,function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,o,c;return e=t,c=[{key:"GWPAdmin",value:function(){r().gwp_live_feed&&r().gwp_live_feed(),r().gwp_deactivate_popup&&r().gwp_deactivate_popup("woo-variation-swatches")}},{key:"GalleryNotification",value:function(){r(".woocommerce_variation").each((function(){var t=r(this).find(".options:first");r(this).find(".woo-variation-gallery-message").insertBefore(t)})),r("input.upload_image_id").on("change",(function(t){r.trim(r(this).val())?r(this).closest(".data").find(".woo-variation-gallery-message").addClass("enable"):r(this).closest(".data").find(".woo-variation-gallery-message").removeClass("enable")})),r("a.install-woo-variation-gallery-action").on("click",(function(t){t.preventDefault();var e=r(this).parent(),o=e.data("installing"),a=e.data("activated"),n=e.data("nonce");e.text(o),wp.ajax.send("install_woo_variation_gallery",{data:{nonce:n},success:function(t){e.text(a),_.delay((function(){r(".woocommerce_variable_attributes .woo-variation-gallery-message").remove()}),5e3)},error:function(t){e.text(a),_.delay((function(){r(".woocommerce_variable_attributes .woo-variation-gallery-message").remove()}),5e3)}})}))}},{key:"PaginationAjax",value:function(t,e,o,a,n){r.ajax({global:!1,url:woo_variation_swatches_admin.wc_ajax_url.toString().replace("%%endpoint%%","woo_variation_swatches_load_product_terms"),method:"POST",data:{offset:a,product_id:t,attribute_id:e,attribute_name:o,nonce:woo_variation_swatches_admin.nonce},beforeSend:function(t,e){n.block({message:null,overlayCSS:{background:"#DDDDDD",opacity:.6}})}}).fail((function(e,o){console.error("not available on: ".concat(t," ").concat($attribute_key,"."),o)})).always((function(){n.unblock()})).done((function(t){t&&(n.html(t),r(document.body).trigger("woo_variation_swatches_product_term_paging_done",n))}))}},{key:"MetaboxToggle",value:function(){r("#woo_variation_swatches_variation_product_options").on("click",".wc-metabox > h4",(function(t){var e=r(this).parent(".wc-metabox"),o=r(this).next(".wc-metabox-content");if(r(t.target).filter(":input, option, .sort, select, label, .select2-selection__rendered").length)return!1;e.hasClass("closed")?(e.removeClass("closed open").addClass("open"),o.slideDown()):(e.removeClass("closed open").addClass("closed"),o.slideUp())}))}},{key:"AttributeTypeSwitch",value:function(){r("#woo_variation_swatches_variation_product_options").on("change","select.woo_variation_swatches_attribute_type_switch",(function(t){var e=r(this).val();["select"].includes(e),["image","color","button"].includes(e)&&r(this).closest(".wc-metabox").find(".wc-metabox-content select.woo_variation_swatches_attribute_term_type_switch").val(e).trigger("change")})).on("change","select.woo_variation_swatches_attribute_term_type_switch",(function(t){var e=r(this).closest(".woo-variation-swatches-attribute-options-wrapper").find("select.woo_variation_swatches_attribute_type_switch").val();r(this).val()!==e&&r(this).closest(".woo-variation-swatches-attribute-options-wrapper").find("select.woo_variation_swatches_attribute_type_switch").val("mixed").trigger("change")}))}},{key:"SetAttributeTypePaging",value:function(t){var e=r(t).closest(".woo-variation-swatches-attribute-options-wrapper").find("select.woo_variation_swatches_attribute_type_switch").val();r(t).find("select.woo_variation_swatches_attribute_term_type_switch").hasClass("new-mode"),["image","color","button"].includes(e)&&r(t).find("select.woo_variation_swatches_attribute_term_type_switch.new-mode").val(e).trigger("change"),r(t).find("select.woo_variation_swatches_attribute_term_type_switch.new-mode").each((function(){r(this).val()}))}},{key:"LoadProductAttributes",value:function(){r("#woocommerce-product-data").on("woocommerce_variations_loaded",(function(t){var e=r("#woo_variation_swatches_variation_product_options").data("product_id");r.ajax({global:!1,url:woo_variation_swatches_admin.wc_ajax_url.toString().replace("%%endpoint%%","woo_variation_swatches_load_product_options"),method:"POST",data:{product_id:e,nonce:woo_variation_swatches_admin.nonce},beforeSend:function(t,e){r("#woo_variation_swatches_variation_product_options_inner").block({message:null,overlayCSS:{background:"#DDDDDD",opacity:.6}})}}).fail((function(t,o){console.error("not load option: ".concat(e,"."),o)})).always((function(){r("#woo_variation_swatches_variation_product_options_inner").unblock()})).done((function(t){r(document.body).trigger("woo_variation_swatches_variation_product_options_loaded",e)}))}))}},{key:"SaveProductAttributes",value:function(){var t=!1,e=r("#woo_variation_swatches_variation_product_options");e.on("change input color-changed",":input:not(.wvs-skip-field)",(function(){t||(window.onbeforeunload=function(){return woo_variation_swatches_admin.nav_warning},t=!0)})).on("click",".woo_variation_swatches_save_product_attributes, .woo_variation_swatches_reset_product_attributes",(function(){window.onbeforeunload=""})).on("click",".woo_variation_swatches_save_product_attributes",(function(t){t.preventDefault();var o,a=e.find(":input:not(.wvs-skip-field)").serializeJSON({disableColonTypes:!0}),n=Object.keys(a)?Object.keys(a).shift():"woo_variation_swatches_product_options",i=e.data("product_id");r.ajax({global:!1,url:woo_variation_swatches_admin.wc_ajax_url.toString().replace("%%endpoint%%","woo_variation_swatches_save_product_options"),method:"POST",data:{data:a[n],product_id:i,nonce:woo_variation_swatches_admin.nonce},beforeSend:function(t,e){clearTimeout(o),r("#woo_variation_swatches_variation_product_options_inner").block({message:null,overlayCSS:{background:"#DDDDDD",opacity:.6}})}}).fail((function(t,e){console.error("not saved on: ".concat(i,"."),e)})).always((function(){r("#woo_variation_swatches_variation_product_options_inner").unblock()})).done((function(t){r("#saved-message").show(),o=setTimeout((function(){r("#saved-message").hide(600)}),5e3),r(document.body).trigger("woo_variation_swatches_variation_product_options_saved",i)}))})).on("click",".woo_variation_swatches_reset_product_attributes",(function(t){if(t.preventDefault(),confirm(woo_variation_swatches_admin.reset_notice)){var e=r(this).data("product_id");r.ajax({global:!1,url:woo_variation_swatches_admin.wc_ajax_url.toString().replace("%%endpoint%%","woo_variation_swatches_reset_product_options"),method:"POST",data:{product_id:e,nonce:woo_variation_swatches_admin.nonce},beforeSend:function(t,e){r("#woo_variation_swatches_variation_product_options_inner").block({message:null,overlayCSS:{background:"#DDDDDD",opacity:.6}})}}).fail((function(t,o){console.error("not reset on: ".concat(e,"."),o)})).always((function(){r("#woo_variation_swatches_variation_product_options_inner").unblock()})).done((function(t){var o=r(t).find("#woo_variation_swatches_variation_product_options_inner").html();r("#woo_variation_swatches_variation_product_options_inner").html(o),r(document.body).trigger("woo_variation_swatches_variation_product_options_reset",e)}))}}))}},{key:"ResetProductAttributes",value:function(){r("#woo_variation_swatches_variation_product_options")}},{key:"Pagination",value:function(){var t=this,e=!1;r("#woo_variation_swatches_variation_product_options").on("change input color-changed",":input:not(.wvs-skip-field)",(function(t){e||(e=!0)})).on("click",".woo_variation_swatches_reset_product_attributes",(function(t){t.preventDefault(),e=!1})).on("click",".woo_variation_swatches_save_product_attributes",(function(t){t.preventDefault(),e=!1})).on("click",".first-page:not(.disabled), .prev-page:not(.disabled), .last-page:not(.disabled), .next-page:not(.disabled)",(function(t){e&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),alert(woo_variation_swatches_admin.nav_warning))})).on("click",".first-page.disabled, .prev-page.disabled, .last-page.disabled, .next-page.disabled",(function(t){t.preventDefault()})).on("click",".first-page:not(.disabled)",(function(e){e.preventDefault();var o=r(e.currentTarget).closest(".product-term-label-settings").find(".product-term-label-settings-contents"),a=r(e.currentTarget).closest(".product-term-label-settings-pagination"),n=o.data("product_id"),i=o.data("attribute_id"),c=o.data("attribute_name");t.PaginationAjax(n,i,c,0,o),a.find(".next-page, .last-page").removeClass("disabled"),a.find(".current-page").text(1),o.data("current",1),a.find(".first-page, .prev-page").addClass("disabled")})).on("click",".prev-page:not(.disabled)",(function(e){e.preventDefault();var o=r(e.currentTarget).closest(".product-term-label-settings").find(".product-term-label-settings-contents"),a=r(e.currentTarget).closest(".product-term-label-settings-pagination");o.block({message:null,overlayCSS:{background:"#DDDDDD",opacity:.6}});var n=o.data("product_id"),i=(o.data("pages"),o.data("attribute_id")),c=o.data("attribute_name"),s=o.data("current"),l=o.data("limit"),d=(o.data("total"),(s-1)*l-l),u=s-1;t.PaginationAjax(n,i,c,d,o),a.find(".next-page, .last-page").removeClass("disabled"),a.find(".current-page").text(u),o.data("current",u),0===d&&a.find(".first-page, .prev-page").addClass("disabled")})).on("click",".next-page:not(.disabled)",(function(e){e.preventDefault();var o=r(e.currentTarget).closest(".product-term-label-settings").find(".product-term-label-settings-contents"),a=r(e.currentTarget).closest(".product-term-label-settings-pagination");o.block({message:null,overlayCSS:{background:"#DDDDDD",opacity:.6}});var n=o.data("product_id"),i=o.data("pages"),c=o.data("attribute_id"),s=o.data("attribute_name"),l=o.data("current"),d=o.data("limit"),u=(o.data("total"),l*d),_=l+1;t.PaginationAjax(n,c,s,u,o),a.find(".first-page, .prev-page").removeClass("disabled"),a.find(".current-page").text(_),o.data("current",_),i===_&&a.find(".next-page, .last-page").addClass("disabled")})).on("click",".last-page:not(.disabled)",(function(e){e.preventDefault();var o=r(e.currentTarget).closest(".product-term-label-settings").find(".product-term-label-settings-contents"),a=r(e.currentTarget).closest(".product-term-label-settings-pagination");o.block({message:null,overlayCSS:{background:"#DDDDDD",opacity:.6}});var n=o.data("product_id"),i=o.data("pages"),c=o.data("attribute_id"),s=o.data("attribute_name"),l=(o.data("current"),o.data("limit")),d=i*l-l;t.PaginationAjax(n,c,s,d,o),a.find(".first-page, .prev-page").removeClass("disabled"),a.find(".current-page").text(i),o.data("current",i),a.find(".next-page, .last-page").addClass("disabled")}))}},{key:"ResetAfterTermCreate",value:function(){r(document.body).on("woo_variation_swatches_admin_term_meta_added",this.ClearImagePicker),r(document.body).on("woo_variation_swatches_admin_term_meta_added",this.ClearColorPicker),r(document).ajaxComplete((function(t,e,o){try{var a=Object.fromEntries(new URLSearchParams(o.data));"add-tag"===a.action&&""===r("#tag-name").val()&&_.delay((function(){r(document.body).trigger("woo_variation_swatches_admin_term_meta_added",a)}),300)}catch(t){}}))}},{key:"ImageUploader",value:function(){r(document.body).off("click","button.wvs_upload_image_button"),r(document.body).on("click","button.wvs_upload_image_button",this.AddImage),r(document.body).on("click","button.wvs_remove_image_button",this.RemoveImage)}},{key:"AddImage",value:function(t){var e,o=this;if(t.preventDefault(),t.stopPropagation(),"undefined"!=typeof wp&&wp.media&&wp.media.editor){if(e)return void e.open();(e=wp.media.frames.select_image=wp.media({title:woo_variation_swatches_admin.media_title,button:{text:woo_variation_swatches_admin.button_title},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON();if(""!==r.trim(t.id)){var a=void 0===t.sizes.thumbnail?t.sizes.full.url:t.sizes.thumbnail.url;r(o).prev().val(t.id),r(o).closest(".meta-image-field-wrapper").find("img").attr("src",a),r(o).next().show()}})),e.on("open",(function(){var t=e.state().get("selection"),a=r(o).prev().val(),n=wp.media.attachment(a);n.fetch(),t.add(n?[n]:[])})),e.open()}}},{key:"RemoveImage",value:function(t){t.preventDefault(),t.stopPropagation();var e=r(this).closest(".meta-image-field-wrapper").find("img").data("placeholder");return r(this).closest(".meta-image-field-wrapper").find("img").attr("src",e),r(this).prev().prev().val(""),r(this).hide(),!1}},{key:"ClearImagePicker",value:function(){r("#addtag").find(".wvs_remove_image_button").trigger("click")}},{key:"__SelectWoo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"select.wvs-select-woo";try{r(document.body).on("woo_variation_swatches_select_woo_init",(function(e){r(t).selectWoo({allowClear:!0})})).trigger("woo_variation_swatches_select_woo_init")}catch(t){window.console.log(t)}}},{key:"InitTooltip",value:function(){r(document.body).trigger("init_tooltips")}},{key:"SelectWoo",value:function(){try{r(document.body).trigger("wc-enhanced-select-init")}catch(t){window.console.log(t)}}},{key:"ColorPicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"input.wvs-color-picker";try{r(document.body).on("woo_variation_swatches_color_picker_init",(function(e){r(t).wpColorPicker({change:function(e,o){r(t).trigger("color-changed")},clear:function(){r(t).trigger("color-changed")}})})).trigger("woo_variation_swatches_color_picker_init")}catch(t){window.console.log(t)}}},{key:"ClearColorPicker",value:function(){r("#addtag").find(".wp-picker-clear").trigger("click")}},{key:"FieldDependency",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[data-dependency]";try{r(document.body).on("init_form_field_dependency",(function(){r(t).GWPFormFieldDependency()})).trigger("init_form_field_dependency")}catch(t){window.console.log(t)}}},{key:"savingDialog",value:function(t,e,o){var i={},c="";if(e.find("input, select").each((function(){var t=r(this).attr("name"),e=r(this).val();t&&("tag_name"===t?c=e:i[t]=e,r(this).val(""))})),c){r(".product_attributes").block({message:null,overlayCSS:{background:"#FFFFFF",opacity:.6}});var s=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({action:"woocommerce_add_new_attribute",taxonomy:o,term:c,security:woocommerce_admin_meta_boxes.add_attribute_nonce},i);r.post(woocommerce_admin_meta_boxes.ajax_url,s,(function(e){e.error?window.alert(e.error):e.slug&&(t.find("select.attribute_values").append('<option value="'+e.term_id+'" selected="selected">'+e.name+"</option>"),t.find("select.attribute_values").change()),r(".product_attributes").unblock()}))}else r(".product_attributes").unblock()}},{key:"AttributeDialog",value:function(){var t=this;r(".product_attributes").on("click","button.wvs_add_new_attribute",(function(e){e.preventDefault();var o=r(this).closest(".woocommerce_attribute"),a=o.data("taxonomy"),n=r(this).data("dialog_title");r(".wvs-attribute-dialog-for-"+a).dialog({title:"",dialogClass:"wp-dialog wvs-attribute-dialog",classes:{"ui-dialog":"wp-dialog wvs-attribute-dialog"},autoOpen:!1,draggable:!0,width:"auto",modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){r(".ui-widget-overlay").bind("click",(function(){r("#attribute-dialog").dialog("close")}))},create:function(){}}).dialog("option","title",n).dialog("option","buttons",[{text:woo_variation_swatches_admin.dialog_save,click:function(){t.savingDialog(o,r(this),a),r(this).dialog("close").dialog("destroy")}},{text:woo_variation_swatches_admin.dialog_cancel,click:function(){r(this).dialog("close").dialog("destroy")}}]).dialog("open")}))}}],(o=null)&&i(e.prototype,o),c&&i(e,c),t}())},,,,,,function(t,e){},,,,,function(t,e){}]);