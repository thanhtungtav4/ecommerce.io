function copyToClipboard(b){var a=jQuery("<input>");jQuery("body").append(a),jQuery(b).addClass("copying"),setTimeout(function(){jQuery(b).removeClass("copying")},300),a.val(jQuery(b).html()).select(),document.execCommand("copy"),a.remove()}!function($){"use strict";$(document).ready(function(){var a={formatNoMatches:vncheckout_array.formatNoMatches},b=!1,c=!1,d=$("#billing_city_field"),e=$("#billing_address_2_field"),f=$("#shipping_city_field"),g=$("#shipping_address_2_field");if($("#billing_state").select2(a),$("#billing_city").select2(a),$("#billing_address_2").select2(a),$("body #billing_state").on("change.select2 select2:select",function(f){$("#billing_city option").val("");var c=f.val;c||(c=$("#billing_state option:selected").val()),c&&!b&&(b=!0,$.ajax({type:"post",dataType:"json",url:vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",matp:c},context:this,beforeSend:function(){d.addClass("devvn_loading"),e.addClass("devvn_loading")},success:function(c){if(b=!1,$("#billing_city,#billing_address_2").html("").select2(a),c.success){var f=c.data,g=new Option("","");$("#billing_city").append(g),$.each(f,function(c,a){var b=new Option(a.name,a.maqh);$("#billing_city").append(b)})}d.removeClass("devvn_loading"),e.removeClass("devvn_loading")}}))}),$("#billing_address_2").length>0&&$("#billing_city").on("select2:select",function(c){var b=c.val;b||(b=$("#billing_city option:selected").val()),b&&$.ajax({type:"post",dataType:"json",url:vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",maqh:b},context:this,beforeSend:function(){e.addClass("devvn_loading")},success:function(b){if($("#billing_address_2").html("").select2(a),b.success){var c=b.data,d=new Option("","");$("#billing_address_2").append(d),$.each(c,function(c,a){var b=new Option(a.name,a.xaid);$("#billing_address_2").append(b)})}e.removeClass("devvn_loading")}})}),$("#shipping_state").select2(a),$("#shipping_city").select2(a),$("#shipping_address_2").select2(a),$("body #shipping_state").on("select2:select",function(b){$("#shipping_city option").val("");var a=b.val;a||(a=$("#shipping_state option:selected").val()),a&&!c&&(c=!0,$.ajax({type:"post",dataType:"json",url:vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",matp:a},context:this,beforeSend:function(){f.addClass("devvn_loading"),g.addClass("devvn_loading")},success:function(a){if(c=!1,$("#shipping_city,#shipping_address_2").html("").select2(),a.success){var b=a.data,d=new Option("","");$("#shipping_city").append(d),$.each(b,function(c,a){var b=new Option(a.name,a.maqh);$("#shipping_city").append(b)})}f.removeClass("devvn_loading"),g.removeClass("devvn_loading")}}))}),$("#shipping_address_2").length>0&&$("#shipping_city").on("select2:select",function(c){var b=c.val;b||(b=$("#shipping_city option:selected").val()),b&&$.ajax({type:"post",dataType:"json",url:vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",maqh:b},context:this,beforeSend:function(){g.addClass("devvn_loading")},success:function(b){if($("#shipping_address_2").html("").select2(a),b.success){var c=b.data,d=new Option("","");$("#shipping_address_2").append(d),$.each(c,function(c,a){var b=new Option(a.name,a.xaid);$("#shipping_address_2").append(b)})}g.removeClass("devvn_loading")}})}),$("#calc_shipping_city_field").length>0&&$(document.body).bind("country_to_state_changed updated_wc_div",function(){var a=$("#calc_shipping_city_field #calc_shipping_city");a.val(),$("#calc_shipping_state").val(),a.select2();var b=!1,c=function(c){c&&!b&&$.ajax({type:"post",dataType:"json",url:vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",matp:c},context:this,beforeSend:function(){b=!0},success:function(c){if(b=!1,c.success){var d=c.data,e=[];$.each(d,function(b,a){e.push({id:a.maqh,text:a.name})}),a.html("").select2({placeholder:"Ch\u1ECDn qu\u1EADn/huy\u1EC7n",data:e})}}})};$("body select.state_select:visible").each(function(){c($(this).val()),$(this,"body").on("select2:select",function(){c($(this).val())})})}),$("#devvn_ghtk_tracking").on("submit",function(){var a=$(this).serialize(),b=$(this).closest(".devvn_ghtk_tracking_form");return $.ajax({type:"post",dataType:"json",url:vncheckout_array.admin_ajax,data:{action:"ghtk_tracking",data:a},context:this,beforeSend:function(){b.addClass("devvn_loading")},success:function(c){var a=c.data;a&&$.each(a.fragments,function(a,c){$(a,b).html(c)}),b.removeClass("devvn_loading")},error:function(a,c,d){b.removeClass("devvn_loading")}}),!1}),$("body").on("change","input[name=payment_method]",function(){vncheckout_array.enabled_free_shipping&&$("form.checkout").trigger("update_checkout")}),$(".get_address_byphone").length>0){$(".get_address_byphone").magnificPopup({type:"inline",midClick:!0,showCloseBtn:!1});var h=!1;$("body").on("click",".btn_get_address",function(){if(h)return!1;var e=$(this),a=$(this).closest("#get_address_content"),b=$("#sdt_get_address",a).val(),c=$(".get_address_content_mess",a),d="";if(b&&/^0+(\d{9,10})$/.test(b)){if(c.html(""),$("#g-recaptcha-response",a).length>0&&!(d=$("#g-recaptcha-response",a).val()))return c.html("Vui l\xf2ng nh\u1EADp m\xe3 x\xe1c th\u1EF1c."),!1;$.ajax({type:"post",dataType:"json",url:vncheckout_array.admin_ajax,data:{action:"get_address_byphone",phone:b,"g-recaptcha-response":d},context:this,beforeSend:function(){c.html(vncheckout_array.loading_text),e.addClass("devvn_loading"),h=!0},success:function(a){if(a.success){if($("#billing_city,#billing_address_2").html("").select2(),a.data.billing.billing_state&&($("#billing_state").val(a.data.billing.billing_state).select2().trigger("change"),$("#billing_state").val())){var b=a.data.district,d=new Option("","");if($("#billing_city").append(d),$.each(b,function(c,a){var b=new Option(a.name,a.maqh);$("#billing_city").append(b)}),a.data.billing.billing_city&&$("#billing_address_2").length>0){$("#billing_address_2").val(a.data.billing.billing_address_2);var b=a.data.ward,d=new Option("","");$("#billing_address_2").append(d),$.each(b,function(c,a){var b=new Option(a.name,a.xaid);$("#billing_address_2").append(b)})}}$.each(a.data.billing,function(a,b){$("#"+a).is("select"),$("#"+a).val(b)}),c.html(""),$("#billing_address_2").trigger("change"),$.magnificPopup.close()}else c.html(vncheckout_array.loadaddress_error);e.removeClass("devvn_loading"),h=!1}})}else c.html(vncheckout_array.phone_error);return!1}),$("body").on("click",".btn_cancel",function(){var a=$(this).closest("#get_address_content"),b=$(".get_address_content_mess",a);return a.removeClass("get_address_error"),$.magnificPopup.close(),h=!1,b.html(""),$("#billing_first_name").length>0?$("#billing_first_name").focus():$("#billing_last_name").focus(),!1})}$("body").on("change","input[name=payment_method]",function(){vncheckout_array.has_vtp&&$("form.checkout").trigger("update_checkout")})})}(jQuery)