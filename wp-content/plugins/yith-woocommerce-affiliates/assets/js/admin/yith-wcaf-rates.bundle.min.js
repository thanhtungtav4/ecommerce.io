(()=>{"use strict";var t,e,n,i={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},r={};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function p(t,e,n){return(e=l(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}i.r(r);var g=jQuery,b=g(document),m=(g("body"),function(t,e,n){return new Promise((function(i,r){var o;void 0===(null===(o=yith)||void 0===o||null===(o=o.ui)||void 0===o?void 0:o.confirm)&&r(new Error("Missing yith.ui utilities"));var a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({title:t||k.generic_confirm_title,message:e||k.generic_confirm_message},n);a.onConfirm=function(){return i(!0)},a.onCancel=r,yith.ui.confirm(a)}))}),O=null===(t=yith_wcaf)||void 0===t?void 0:t.ajax_url,w=null===(e=yith_wcaf)||void 0===e?void 0:e.nonces,k=null===(n=yith_wcaf)||void 0===n?void 0:n.labels,j=function(){function t(e){var n,i;o(this,t),p(this,"$container",void 0),p(this,"$fields",void 0),p(this,"dependencies",{}),this.$container=e,null!==(n=this.$container)&&void 0!==n&&n.length&&(this.initFields(),null!==(i=this.$fields)&&void 0!==i&&i.length&&this.initDependencies())}return u(t,[{key:"initFields",value:function(){this.$fields=this.$container.find(":input")}},{key:"initDependencies",value:function(){this.buildDependenciesTree(),Object.keys(this.dependencies).length&&this.handleDependencies()}},{key:"buildDependenciesTree",value:function(){var t=this;this.$fields.closest("[data-dependencies]").each((function(){var e=g(this),n=e.attr("id");if(n){var i=p({},n,e.data("dependencies"));t.dependencies=g.extend(t.dependencies,i)}})),this.$container.find("[data-dep-target]").each((function(){var e=g(this),n=e.data("dep-id"),i=e.data("dep-target"),r=e.data("dep-value");if(n&&i&&r){var o=p({},i,p({},n,r.toString().split(",")));t.dependencies=g.extend(t.dependencies,o)}}))}},{key:"handleDependencies",value:function(){this.$fields.on("change",this.applyDependencies.bind(this)),this.applyDependencies()}},{key:"applyDependencies",value:function(){var t=this;g.each(this.dependencies,(function(e,n){var i=t.findFieldContainer(e);i.length&&(t.checkConditions(n)?null==i||i.fadeIn():null==i||i.hide())}))}},{key:"findField",value:function(t){var e=this.$container.find("#".concat(t));return e.length||(e=this.$container.find("#".concat(t,"_field"))),!!e.length&&(e.is(":input")||(e=e.find(":input")),e)}},{key:"findFieldContainer",value:function(t){var e=this.findField(t);if(null==e||!e.length)return!1;var n=e.closest("#".concat(t,"_container"));return n.length||(n=e.closest(".form-row")),n.length||(n=e.closest("tr")),!!n.length&&n}},{key:"checkConditions",value:function(t){var e=this,n=!0;return g.each(t,(function(t,i){var r,o=e.findField(t);if(n&&null!=o&&o.length){var a,l;if(o.first().is('input[type="radio"]'))r=null===(a=o.filter(":checked"))||void 0===a||null===(a=a.val())||void 0===a?void 0:a.toString();else r=null==o||null===(l=o.val())||void 0===l?void 0:l.toString();n=Array.isArray(i)?i.includes(r):"function"==typeof i?i(r):0===i.indexOf(":")?o.is(i):0===i.indexOf("!:")?!o.is(i.toString().substring(1)):0===i.indexOf("!")?i.toString().substring(1)!==r:i.toString()===r,void 0!==e.dependencies[t]&&(n=n&&e.checkConditions(e.dependencies[t]))}})),n}}]),t}();var _=function(){function t(e){var n;o(this,t),p(this,"$container",void 0),p(this,"ERROR_CLASS","woocommerce-invalid"),this.$container=e,null!==(n=this.$container)&&void 0!==n&&n.length&&this.initValidation()}return u(t,[{key:"initValidation",value:function(){this.initForm(),this.initFields()}},{key:"initForm",value:function(){var t=this.$container.is("form")?this.$container:this.$container.find("form");if(t.length){var e=this;t.on("submit yith_wcaf_validate_fields",(function(t){var n=g(this);return!!e.validateForm(n)||(t.stopImmediatePropagation(),!1)}))}}},{key:"initFields",value:function(){var t=this.getFields(this.$container);if(t.length){var e=this;t.on("keyup change",(function(){var t=g(this);e.validateField(t)}))}}},{key:"getFieldWrapper",value:function(t){return t.closest(".form-row, .yith-plugin-fw-panel-wc-row")}},{key:"getFields",value:function(t){return g("input, select, textarea",t).not('input[type="submit"]').not('input[type="hidden"]').not(".select2-search__field")}},{key:"getVisibleFields",value:function(t){var e=this;return this.getFields(t).filter((function(t,n){var i=g(n);return e.getFieldWrapper(i).is(":visible")}))}},{key:"isFieldValid",value:function(t){var e=this.getFieldWrapper(t),n=t.attr("type"),i=t.val();if(t.prop("required")||e.hasClass("required")||e.hasClass("validate-required")||e.hasClass("yith-plugin-fw--required")||["reg_username","reg_email","reg_password"].includes(t.get(0).id)){if("checkbox"===n&&!t.is(":checked"))throw"missing";if(!i)throw"missing"}var r=e.data("pattern");if(r&&!new RegExp(r).test(i))throw"malformed";var o=e.data("min_length");if(o&&i.length<o)throw"short";var a=e.data("max_length");if(a&&i.length>a)throw"long";if("number"===n){var l=parseFloat(t.attr("min")),c=parseFloat(t.attr("max")),u=parseFloat(i);if(l&&l>u||c&&c<u)throw"overflow"}return!0}},{key:"validateField",value:function(t){try{this.isFieldValid(t)}catch(e){return this.reportError(t,e),!1}return this.removeError(t),!0}},{key:"validateForm",value:function(t){var e=this.getVisibleFields(t);if(!e.length)return!0;var n=this,i=!0;return e.each((function(){var t=g(this);n.validateField(t)||(i=!1)})),!!i||(this.scrollToFirstError(t),!1)}},{key:"getErrorMsg",value:function(t,e){var n,i,r,o,a,l=t.data("error");if(l)return l;var c=this.getFieldWrapper(t);return(l=c.data("error"))||(l=c.find("label").data("error"))?l:!(null==k||!k.errors)&&("missing"===e&&(l="checkbox"===t.attr("type")?null===(n=k.errors)||void 0===n?void 0:n.accept_check:null===(i=k.errors)||void 0===i?void 0:i.compile_field)?l:l=null!==(r=k.errors)&&void 0!==r&&r[e]?null===(o=k.errors)||void 0===o?void 0:o[e]:null===(a=k.errors)||void 0===a?void 0:a.general_error)}},{key:"reportError",value:function(t,e){var n=this.getFieldWrapper(t),i=this.getErrorMsg(t,e);if(n.addClass(this.ERROR_CLASS),i){n.find(".error-msg").remove();var r=g("<span/>",{class:"error-msg",text:i});n.append(r)}}},{key:"removeError",value:function(t){var e=this.getFieldWrapper(t),n=e.find(".error-msg");e.removeClass(this.ERROR_CLASS),n.remove()}},{key:"scrollToFirstError",value:function(t){var e=t.find(".".concat(this.ERROR_CLASS)).first();if(e.length){var n=this.findScrollableParent(t);n&&n.length||(n=g("html, body"));var i=e.offset().top-n.offset().top,r=i;n.is("html, body")||(r=n.get(0).scrollTop+i),n.animate({scrollTop:r})}}},{key:"findScrollableParent",value:function(t){var e,n,i=t.get(0);if(!i)return null;do{if(document===i)return null;n="visible"!==(e=window.getComputedStyle(i).overflowY)&&"hidden"!==e}while(!(n&&i.scrollHeight>i.clientHeight)&&(i=i.parentNode));return g(i)}}]),t}();var x=function(t,e){if(void 0!==g.fn.selectWoo){var n,i=!!t.data("allow_clear"),r=t.data("placeholder"),o=t.data("minimum_input_length"),a=t.data("action");n={allowClear:i,placeholder:r,minimumInputLength:o||3},!!a&&(n.ajax={url:O,dataType:"json",delay:250,data:function(e){return{term:e.term,action:a,security:t.data("security"),exclude:t.data("exclude"),include:t.data("include"),limit:t.data("limit")}},processResults:function(t){var e=[];return t&&g.each(t,(function(t,n){e.push({id:t,text:n})})),{results:e}},cache:!0}),n=g.extend(n,e||{});try{t.selectWoo(n).addClass("enhanced")}catch(t){}}},P=function(t){var e;void 0!==g.fn.datepicker&&(null!==(e=t)&&void 0!==e&&e.length||(t=b),g(".yith-wcaf-enhanced-date-picker",t).add(".date-picker-field",t).add(".date-picker",t).not(".enhanced").each((function(){!function(t){if(void 0!==g.fn.datepicker){var e,n=t.data("format"),i=t.data("number-of-months"),r=t.data("max-date"),o=t.data("min-date"),a=t.data("altfield"),l=t.data("altformat");e={dateFormat:n||"yy-mm-dd",numberOfMonths:i||1,maxDate:r||null,minDate:o||null,altField:a?t.next(a).get(0):null,altFormat:l||"",beforeShow:function(t,e){var n;null==e||null===(n=e.dpDiv)||void 0===n||null===(n=n.addClass("yith-wcaf-datepicker"))||void 0===n||n.addClass("yith-plugin-fw-datepicker-div")},onClose:function(t,e){var n;null==e||null===(n=e.dpDiv)||void 0===n||null===(n=n.removeClass("yith-wcaf-datepicker"))||void 0===n||n.removeClass("yith-plugin-fw-datepicker-div")}};try{t.datepicker(e).addClass("enhanced")}catch(t){}}}(g(this))})))},S=function(t){var e;null!==(e=t)&&void 0!==e&&e.length||(t=b);var n=g(".yith-wcaf-accordion",t).not(".enhanced");n.length&&n.each((function(){!function(t){var e=g(".accordion-radio",t);e.length&&(e.on("change",(function(){var n=e.filter(":checked").closest(".accordion-option").find(".accordion-content");g(".accordion-content",t).not(n).slideUp(),n.slideDown()})).trigger("change"),t.addClass("enhanced"))}(g(this))}))},D=function(t){var e;null!==(e=t)&&void 0!==e&&e.length||(t=b);var n=g(".yith-wcaf-attach-file",t).not(".enhanced");n.length&&n.each((function(){var t,e,n=g(this);(e=(t=n).parent().find('input[type="file"]')).length&&(t.on("click",(function(t){t.preventDefault(),e.trigger("click")})).addClass("enhanced"),e.on("change",(function(e){var n=e.target.files,i=[],r=t.next("small.files-list");for(var o in n)n.hasOwnProperty(o)&&i.push(n[o].name);if(i.length){if(r.length||(r=g("<small/>",{class:"files-list"}),t.after(r)),r.text(i.join(", ")),t.hasClass("auto-submit")){var a=t.closest("form");if(!a.length)return;a.submit()}}else r.length&&r.remove()})))}))},F=function(t){var e;null!==(e=t)&&void 0!==e&&e.length||(t=b),function(t){var e;void 0!==g.fn.selectWoo&&(null!==(e=t)&&void 0!==e&&e.length||(t=b),g(".yith-wcaf-enhanced-select",t).not(".enhanced").each((function(){var t=g(this);x(t)})))}(t),P(t),S(t),D(t),function(t){var e;null!==(e=t)&&void 0!==e&&e.length||(t=b),new j(t)}(t),function(t){var e;null!==(e=t)&&void 0!==e&&e.length||(t=b),new _(t)}(t),g(".yith-wcaf-enhanced-template",t).not(".enhanced").each((function(){var t=g(this),e=t.find(".editor");g("a.toggle_editor",t).text((function(){var t=g(this);t.text(t.data("view-label"))})).on("click",(function(){var t=g(this),n=e.is(":visible");return t.text(t.data("".concat(n?"view":"hide","-label"))),e.slideToggle(),!1})),g("a.delete_template",t).on("click",(function(){return window.confirm(g(this).data("confirm"))})),g("textarea",e).on("change",(function(){var t=g(this),e=t.attr("data-name");e&&t.attr("name",e)})),t.addClass("enhanced")})),g(".editable",t).not(".enhanced").one("click",(function(){var t=g(this),e=t.parent(),n=e.find(".edit");n&&(e.find(".edited").slideUp(),n.slideDown(),t.removeClass("editable"))})).addClass("enhanced"),g("[data-postfix]",t).not(".enhanced").each((function(){var t=g(this),e=g("<span/>",{class:"field-postfix",text:t.data("postfix"),style:"line-height: 2.5; margin-left: 5px;"});t.after(e)})),g((function(){var e=[".yith-plugin-fw-list-table-container"];g("input, textarea, select",t).on("change",(function(){g(this).closest(e.join(", ")).length&&(window.onbeforeunload=null)}))}))},$=function(){function t(e){o(this,t),p(this,"$container",void 0),this.$container=e,this.initFields(),this.initBulkAction()}return u(t,[{key:"initFields",value:function(){F(this.$container)}},{key:"initBulkAction",value:function(){var t=g("#bulk-action-selector-top",this.$container);t.length&&x(t,{minimumResultsForSearch:1/0,minimumInputLength:0})}}]),t}();function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},R.apply(this,arguments)}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T=function(t,e,n,i,r){var o=g(this);i instanceof FormData?(i.append("action","yith_wcaf_".concat(e)),i.append("security",null!=w&&w[n]?null==w?void 0:w[n]:n)):i=E({action:"yith_wcaf_".concat(e),security:null!=w&&w[n]?null==w?void 0:w[n]:n},i);var a=E({url:O,data:i,method:t,beforeSend:function(){return o.length&&function(t){if(void 0===g.fn.block)return!1;try{return t.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t}catch(t){return!1}}(o)},complete:function(){return o.length&&function(t){if(void 0===g.fn.unblock)return!1;try{t.unblock()}catch(t){return!1}}(o)}},r);return g.ajax(a)};const A={request:T,get:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return T.call.apply(T,[this,"get"].concat(e))},post:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return T.call.apply(T,[this,"post"].concat(e))}};var B=function(){function t(e,n){if(o(this,t),p(this,"$context",null),p(this,"$table",null),p(this,"args",null),e.length){var i=g("table.wp-list-table",e);i.length||(i=g(".no-items-found",e)),i.length&&(this.$context=e,this.$table=i,this.args=g.extend({action_suffix:"",nonce_suffix:""},n||{}),this.init())}}return u(t,[{key:"init",value:function(){}},{key:"doButtonAction",value:function(t,e,n){var i,r,o,a=this,l=e.closest("tr");if(l.length){var c=null===(i=this.args)||void 0===i?void 0:i.data;"function"==typeof c&&(c=c.call(this,l)),this.doAjax("".concat(t).concat((null===(r=this.args)||void 0===r?void 0:r.action_suffix)||""),"".concat(t).concat((null===(o=this.args)||void 0===o?void 0:o.nonce_suffix)||""),c,(function(t){"function"==typeof n&&n(l,t),null!=t&&t.template&&a.replaceTable(t.template)}))}}},{key:"doAjax",value:function(t,e,n,i){return A.post.call(this.$context,t,e,n).done((function(t){"function"==typeof i&&null!=t&&t.success&&i(null==t?void 0:t.data)}))}},{key:"replaceTable",value:function(t){var e=g(t).find("table");e.length&&(this.$table.replaceWith(e),this.$table=e)}}]),t}();function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var W=function(){function t(e,n){var i;o(this,t),p(this,"$opener",null),p(this,"$target",null),p(this,"modal",null),p(this,"validator",null),p(this,"args",null),null!=e&&e.length&&void 0!==(null===(i=yith)||void 0===i||null===(i=i.ui)||void 0===i?void 0:i.modal)&&(this.$opener=e,this.args=g.extend({title:"",content:!1,footer:!1,showClose:!0,width:500,onCreate:!1,onClose:!1,shouldOpen:null,template:!1,titleTemplate:!1,data:!1,classes:{wrap:"yith-wcaf-modal"}},n||{}),this.init())}return u(t,[{key:"addOpeners",value:function(t){this.$opener=this.$opener.add(t),this.reinit()}},{key:"init",value:function(){var t=this;this.$opener.on("click",(function(e){t.$target=g(e.target),t.shouldOpen()&&(e.preventDefault(),t.onOpen())}))}},{key:"reinit",value:function(){this.$opener.off("click"),this.init()}},{key:"initFields",value:function(){this.getFields().filter("[data-value]").each((function(){var t=g(this),e=t.data("value");if(t.is('input[type="checkbox"]')||t.is('input[type="radio"]'))"boolean"==typeof e?t.prop("checked",e):e?t.prop("checked",e===t.val()):t.prop("checked",!1);else if(t.is("select")&&Array.isArray(e))t.val(e);else if(t.is("select")&&"object"===a(e)){for(var n in e){var i;null!==(i=t.find('[value="'.concat(n,'"]')))&&void 0!==i&&i.length||t.append(g("<option/>",{value:n,text:e[n]}))}t.val(Object.keys(e))}else"boolean"==typeof e?t.val(e?1:0):e&&t.val(String(e));t.trigger("change")})),F(this.modal.elements.content)}},{key:"initSubmit",value:function(){this.modal.elements.content.find("form").on("submit",this.onSubmit.bind(this))}},{key:"getData",value:function(){var t,e=(null===(t=this.args)||void 0===t?void 0:t.data)||{};return"function"==typeof e&&(e=e.call(this)),e}},{key:"shouldOpen",value:function(){var t;return"function"!=typeof(null===(t=this.args)||void 0===t?void 0:t.shouldOpen)||this.args.shouldOpen.call(this)}},{key:"onOpen",value:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.args),e=(null==t?void 0:t.template)||"",n=(null==t?void 0:t.titleTemplate)||"",i=this.getData();e?t.content=wp.template(e)(i):"function"==typeof(null==t?void 0:t.content)&&(t.content=t.content.call(this,i)),n?t.title=wp.template(n)(i):"function"==typeof(null==t?void 0:t.title)&&(t.title=t.title.call(this,i)),this.modal=yith.ui.modal(t),g(document.body).trigger("wc-enhanced-select-init"),this.initFields(),this.initSubmit()}},{key:"beforeSubmit",value:function(){return!0}},{key:"onSubmit",value:function(){var t,e;if(!this.beforeSubmit())return!1;"function"==typeof(null===(t=this.args)||void 0===t?void 0:t.onSubmitSuccess)&&(null===(e=this.args)||void 0===e||e.onSubmitSuccess())}},{key:"getField",value:function(t){return this.getFields().filter('[name="'.concat(t,'"]')).first()}},{key:"getFields",value:function(){return this.modal.elements.content.find(":input").not('button, input[type="submit"], .select2-search__field')}},{key:"serialize",value:function(){var t=this.getFields(),e={};return t.get().reduce((function(t,n){var i,r=g(n);if(r.is('input[type="checkbox"]')){if(!r.is(":checked"))return t;i=1}else i=r.val();var o=r.attr("name");if(-1!==o.indexOf("[")){var a=o.split("[").map((function(t){return t.replace(/[\[, \]]/g,"")})),l=a.shift(),c=a.reverse().reduce((function(t,e){return p({},e,t)}),i);void 0===e[l]?e[l]=c:e[l]=g.extend(!0,e[l],c)}else e[o]=i;return t}),e),e}},{key:"showErrorMessage",value:function(t){var e=this.modal.elements.content,n=g("<div/>",{class:"error-message form-row",text:t});this.hideErrorMessage(),e.prepend(n),n.get(0).scrollIntoView()}},{key:"hideErrorMessage",value:function(){this.modal.elements.content.children(".error-message").remove()}}]),t}();function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}var L=function(t){f(n,t);var e=V(n);function n(){var t;o(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return p(d(t=e.call.apply(e,[this].concat(r))),"modal",null),t}return u(n,[{key:"init",value:function(){this.initModal(),this.initDragNDrop(),this.initCloneButtons(),this.initDeleteButtons(),this.initEnableButtons(),this.initRestoreDefaultButton()}},{key:"initCloneButtons",value:function(){var t=this;this.$context.on("click",".clone a",(function(e){e.preventDefault(),t.doButtonAction("clone",g(this))}))}},{key:"initDeleteButtons",value:function(){var t=this;this.$context.on("click",".delete a",(function(e){var n=this;e.preventDefault(),m().then((function(){t.doButtonAction("delete",g(n),(function(t){return t.remove()}))}))}))}},{key:"initEnableButtons",value:function(){var t=this;this.$context.on("change",'.enabled input[type="checkbox"]',(function(e){e.preventDefault();var n=g(this),i=n.is(":checked")?"enable":"disable";t.doButtonAction(i,n)}))}},{key:"initModal",value:function(){var t=this.getModalOpeners();t.length&&(this.modal=new W(t))}},{key:"initDragNDrop",value:function(){var t=this;this.$table.find("tbody").sortable({handle:".drag",update:function(){var e,n,i=t.$table.find("tbody").find("tr").get().map((function(t){return t.getAttribute("data-id")}));t.doAjax("sort".concat(null===(e=t.args)||void 0===e?void 0:e.action_suffix,"s"),"sort".concat(null===(n=t.args)||void 0===n?void 0:n.nonce_suffix,"s"),{order:i})}})}},{key:"initRestoreDefaultButton",value:function(){var t=this;g("#restore_defaults",this.$context).on("click",(function(e){var n,i;e.preventDefault(),t.doAjax("restore_default".concat(null===(n=t.args)||void 0===n?void 0:n.action_suffix,"s"),"restore".concat(null===(i=t.args)||void 0===i?void 0:i.nonce_suffix,"s"),null,(function(e){null!=e&&e.template&&t.replaceTable(e.template)}))}))}},{key:"getModalOpeners",value:function(){return g(".edit",this.$table).add("#add_field",this.$context).add(".yith-add-button",this.$context)}},{key:"refreshModalOpeners",value:function(){this.modal.addOpeners(this.getModalOpeners())}},{key:"replaceTable",value:function(t){R(v(n.prototype),"replaceTable",this).call(this,t),this.initModal(),this.initDragNDrop()}}]),n}(B);function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}var N=function(t){f(n,t);var e=I(n);function n(t,i){return o(this,n),e.call(this,t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({template:"yith-wcaf-add-rate-rule-modal",title:function(t){return t.name?null==k?void 0:k.edit_rate_rule_title:null==k?void 0:k.add_rate_rule_title},data:function(){var t=this.$target,e=null==t?void 0:t.closest("[data-item]");return e&&e.length?e.data("item"):{}},width:400},i))}return u(n,[{key:"onSubmit",value:function(){var t=this,e=this.modal.elements.content;return!!this.beforeSubmit()&&(this.hideErrorMessage(),A.post.call(e,"save_rate_rule","save_rate_rule",{rule:this.serialize()}).done((function(e){var n,i,r;"function"==typeof(null===(n=t.args)||void 0===n?void 0:n.onSubmitSuccess)&&(null===(r=t.args)||void 0===r||r.onSubmitSuccess(null==e?void 0:e.data));null!=e&&e.success?t.modal.close():null!=e&&null!==(i=e.data)&&void 0!==i&&i.message&&t.showErrorMessage(e.data.message)})),!1)}}]),n}(W);function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}var U=function(t){f(n,t);var e=H(n);function n(t,i){return o(this,n),e.call(this,t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({action_suffix:"_rate_rule",nonce_suffix:"_rate_rule",data:function(t){return{rule_id:t.data("id")}}},i))}return u(n,[{key:"initModal",value:function(){var t=this,e=this.getModalOpeners();e.length&&(this.modal=new N(e,{onSubmitSuccess:function(e){null!=e&&e.template&&t.replaceTable(null==e?void 0:e.template)}}))}}]),n}(L);function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}var Y=function(t){f(n,t);var e=Q(n);function n(){var t;return o(this,n),(t=e.call(this,g("#yith_wcaf_panel_affiliates-rates"))).initTable(),t}return u(n,[{key:"initTable",value:function(){var t=g("#yith_wcaf_panel_affiliates-rates");new U(t)}}]),n}($);g((function(){return new Y}));var G=window;for(var J in r)G[J]=r[J];r.__esModule&&Object.defineProperty(G,"__esModule",{value:!0})})();