!function(e){"use strict";e(document).ready(function(){e(".devvn_list_box").masonry({itemSelector:".devvn_list_item"});var i={init:function(){e("body .devvn-reviews-img-popup").magnificPopup({type:"inline",mainClass:"devvn-shortcode-reviews-popup devvn-reviews-popup",showCloseBtn:!0,closeOnBgClick:!0,gallery:{enabled:!0,navigateByImgClick:!0,preload:1},callbacks:{change:function(){if(0==devvn_shortcode_reviews.disable_owl_slider){let i=e(".devvn_review_image_slider",this.content);e(".img_item",i).length>1&&!i.hasClass("owl-carousel")&&i.addClass("owl-carousel").owlCarousel({loop:!1,dots:!1,items:1,nav:!0})}},open:function(){if(0==devvn_shortcode_reviews.disable_owl_slider){let i=e(".devvn_review_image_slider",this.wrap);e(".img_item",i).length>1&&!i.hasClass("owl-carousel")&&i.addClass("owl-carousel").owlCarousel({loop:!1,dots:!1,items:1,nav:!0})}}}})}};function o(){e(".devvn_review_popup_img").remove()}i.init(),e("body").on("init",function(){i.init()}),e(".devvn_shortcode_review_loadmore").on("click",function(){let o=e(this),t=parseInt(o.attr("data-page")),n=o.data("options"),a=o.closest(".devvn_shortcode_list_reviews");return e.ajax({type:"post",dataType:"json",url:devvn_shortcode_reviews.ajax_url,data:{action:"get_shortcode_reviews",paged:t,options:n},context:this,beforeSend:function(){a.addClass("devvn_loading")},success:function(t){if(t.success){let n=t.data.maxpage,s=t.data.current_page,l=t.data.review_item;s>=n&&e(".devvn_shortcode_reviews_paging",a).remove(),o.attr("data-page",s+1),e.each(l,function(i,o){let t=e(o);e(".devvn_list_box",a).append(t).masonry("appended",t)}),i.init()}else alert(t.data);a.removeClass("devvn_loading")},error:function(e,i,o){a.removeClass("devvn_loading"),alert("C\xf3 lỗi kh\xf4ng x\xe1c định")}}),!1}),e("body").on("click",".devvn_review_image_slider .img_item a",function(){if(0==devvn_shortcode_reviews.enable_img_popup)return!1;let i=e(this).closest(".devvn_review_image_slider"),o="";return e(".img_item a",i).each(function(){o+='<img src="'+e(this).attr("href")+'" alt=""><br>'}),e("body").append('<div class="devvn_review_popup_img"><button type="button" class="devvn_review_popup_close">\xd7</button><div class="devvn_review_popup_wrap"><div class="devvn_review_popup_box">'+o+"</div></div></div>"),!1}),e("body").on("click",".devvn_review_popup_close",function(){o()}),e(document).on("mouseup",".devvn_review_popup_img",function(i){var t=e("img");t.is(i.target)||0!==t.has(i.target).length||o()}),e("body").on("click",".view_more_img",function(o){o.preventDefault();let t=e(this).closest(".img_reviews_wrap"),n=e(this).data("prod_id"),a=e(".img_reviews_box_full .devvn_list_box",t),s=e(".img_reviews_box_full .devvn_list_popup_title",t);""==a.html()?e.ajax({type:"post",dataType:"json",url:devvn_reviews.ajax_url,data:{action:"get_reviews_has_img",prod_id:n},context:this,beforeSend:function(){t.addClass("devvn_loading")},success:function(o){if(o.success){e("html").addClass("openPopup");let n=o.data.review_item,l=o.data.title_popup;e.each(n,function(i,o){let t=e(o);a.append(t).masonry("appended",t)}),s.html(l),a.masonry("layout"),i.init()}else alert(o.data);t.removeClass("devvn_loading")},error:function(e,i,o){alert(i),t.removeClass("devvn_loading")}}):e("html").addClass("openPopup")}),e("body").on("click",".devvn_list_popup_close",function(){e("html").removeClass("openPopup")})})}(jQuery);