!function($){"use strict";$(document).ready(function(){$(".devvn_list_box").masonry({itemSelector:".devvn_list_item"});var a={init:function(){$("body .devvn-reviews-img-popup").magnificPopup({type:"inline",mainClass:"devvn-shortcode-reviews-popup devvn-reviews-popup",showCloseBtn:!0,closeOnBgClick:!0,gallery:{enabled:!0,navigateByImgClick:!0,preload:1},callbacks:{change:function(){if(0==devvn_shortcode_reviews.disable_owl_slider){let a=$(".devvn_review_image_slider",this.content);$(".img_item",a).length>1&&!a.hasClass("owl-carousel")&&a.addClass("owl-carousel").owlCarousel({loop:!1,dots:!1,items:1,nav:!0})}},open:function(){if(0==devvn_shortcode_reviews.disable_owl_slider){let a=$(".devvn_review_image_slider",this.wrap);$(".img_item",a).length>1&&!a.hasClass("owl-carousel")&&a.addClass("owl-carousel").owlCarousel({loop:!1,dots:!1,items:1,nav:!0})}}}})}};function b(){$(".devvn_review_popup_img").remove()}a.init(),$("body").on("init",function(){a.init()}),$(".devvn_shortcode_review_loadmore").on("click",function(){let b=$(this),c=parseInt(b.attr("data-page")),d=b.data("options"),e=b.closest(".devvn_shortcode_list_reviews");return $.ajax({type:"post",dataType:"json",url:devvn_shortcode_reviews.ajax_url,data:{action:"get_shortcode_reviews",paged:c,options:d},context:this,beforeSend:function(){e.addClass("devvn_loading")},success:function(c){if(c.success){let f=c.data.maxpage,d=c.data.current_page,g=c.data.review_item;d>=f&&$(".devvn_shortcode_reviews_paging",e).remove(),b.attr("data-page",d+1),$.each(g,function(c,b){let a=$(b);$(".devvn_list_box",e).append(a).masonry("appended",a)}),a.init()}else alert(c.data);e.removeClass("devvn_loading")},error:function(a,b,c){e.removeClass("devvn_loading"),alert("C\xf3 l\u1ED7i kh\xf4ng x\xe1c \u0111\u1ECBnh")}}),!1}),$("body").on("click",".devvn_review_image_slider .img_item a",function(){if(0==devvn_shortcode_reviews.enable_img_popup)return!1;let a=$(this).closest(".devvn_review_image_slider"),b="";return $(".img_item a",a).each(function(){b+='<img src="'+$(this).attr("href")+'" alt=""><br>'}),$("body").append('<div class="devvn_review_popup_img"><button type="button" class="devvn_review_popup_close">\xd7</button><div class="devvn_review_popup_wrap"><div class="devvn_review_popup_box">'+b+"</div></div></div>"),!1}),$("body").on("click",".devvn_review_popup_close",function(){b()}),$(document).on("mouseup",".devvn_review_popup_img",function(a){var c=$("img");c.is(a.target)||0!==c.has(a.target).length||b()}),$("body").on("click",".view_more_img",function(c){c.preventDefault();let b=$(this).closest(".img_reviews_wrap"),d=$(this).data("prod_id"),e=$(".img_reviews_box_full .devvn_list_box",b),f=$(".img_reviews_box_full .devvn_list_popup_title",b);""==e.html()?$.ajax({type:"post",dataType:"json",url:devvn_reviews.ajax_url,data:{action:"get_reviews_has_img",prod_id:d},context:this,beforeSend:function(){b.addClass("devvn_loading")},success:function(c){if(c.success){$("html").addClass("openPopup");let d=c.data.review_item,g=c.data.title_popup;$.each(d,function(c,b){let a=$(b);e.append(a).masonry("appended",a)}),f.html(g),e.masonry("layout"),a.init()}else alert(c.data);b.removeClass("devvn_loading")},error:function(c,a,d){alert(a),b.removeClass("devvn_loading")}}):$("html").addClass("openPopup")}),$("body").on("click",".devvn_list_popup_close",function(){$("html").removeClass("openPopup")})})}(jQuery)